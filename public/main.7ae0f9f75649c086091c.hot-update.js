/*! For license information please see main.7ae0f9f75649c086091c.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/classes/Page.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var i=n("./node_modules/gsap/index.js"),r=n("./node_modules/normalize-wheel/index.js"),o=n.n(r),a=n("./node_modules/prefix/index.js"),s=n.n(a),l=n("./node_modules/lodash/each.js"),u=n.n(l),c=n("./node_modules/lodash/map.js"),m=n.n(c),h=n("./app/animations/Highlight.js"),f=n("./app/animations/Title.js"),p=n("./app/animations/Paragraph.js"),d=n("./app/animations/Label.js");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,O(i.key),i)}}function O(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var S=function(){function e(t){var n=t.element,i=t.elements,r=t.id;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.selector=n,this.selectorChildren=w(w({},i),{},{animationsHighlights:'[data-animation="highlight"]',animationsTitles:'[data-animation="title"]',animationsParagraphs:'[data-animation="paragraph"]',animationsLabels:'[data-animation="label"]'}),this.transformPrefix=s()("transform"),console.log(this.transformPrefix),this.onMouseWheelEvent=this.onMouseWheel.bind(this)}var t,n,r;return t=e,(n=[{key:"create",value:function(){var e=this;this.element=document.querySelector(this.selector),this.elements={},this.scroll={current:0,target:0,last:0,limit:0},u()(this.selectorChildren,(function(t,n){t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?e.elements[n]=t:(e.elements[n]=document.querySelectorAll(t),0===e.elements[n].length?e.elements[n]=null:1===e.elements[n].length&&(e.elements[n]=document.querySelector(t))),console.log("elements: ",e.elements[n],t)})),this.createAnimations()}},{key:"createAnimations",value:function(){var e;this.animations=[],this.animationsHighlights=m()(this.elements.animationsHighlights,(function(e){return new h.default({element:e})})),this.animationsTitles=m()(this.elements.animationsTitles,(function(e){return new f.default({element:e})})),this.animations.push(this.animationsTitles),this.animationsParagraphs=m()(this.elements.animationsParagraphs,(function(e){return new p.default({element:e})})),this.animations.push(this.animationsParagraphs),this.animationsLabels=m()(this.elements.animationsLabels,(function(e){return new d.default({element:e})})),(e=this.animations).push.apply(e,b(this.animationsLabels))}},{key:"show",value:function(){var e=this;return new Promise((function(t){e.animationIn=i.default.timeline(),e.animationIn.fromTo(e.element,{autoAlpha:0},{autoAlpha:1,onComplete:t}),e.animationIn.call((function(){e.addEventListeners(),t()}))}))}},{key:"hide",value:function(){var e=this;return new Promise((function(t){e.removeEventListeners(),e.animationOut=i.default.timeline(),e.animationOut.to(e.element,{autoAlpha:0,onComplete:t})}))}},{key:"onMouseWheel",value:function(e){var t=o()(e).pixelY;this.scroll.target+=t}},{key:"onResize",value:function(){this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),u()(this.animationsLabels,(function(e){e.onResize()})),u()(this.animationsTitles,(function(e){e.onResize()})),u()(this.animationsParagraphs,(function(e){e.onResize()})),u()(this.animationsHighlights,(function(e){e.onResize()}))}},{key:"update",value:function(){this.scroll.target=i.default.utils.clamp(0,this.scroll.limit,this.scroll.target),this.scroll.current=i.default.utils.interpolate(this.scroll.current,this.scroll.target,.1),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&(this.elements.wrapper.style[this.transformPrefix]="translateY(-".concat(this.scroll.current,"px)"))}},{key:"addEventListeners",value:function(){window.addEventListener("mousewheel",this.onMouseWheelEvent)}},{key:"removeEventListeners",value:function(){window.addEventListener("mousewheel",this.onMouseWheelEvent)}}])&&P(t.prototype,n),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}},(function(e){e.h=()=>"8ffa099b73956d2e3c39"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxTQUFTaUUsVUFDaEI5RCxLQUFLSCxTQUFTaUUsUUFBUUssTUFDcEJuRSxLQUFLUSxpQkFDSCxlQUFINEQsT0FBa0JwRSxLQUFLb0IsT0FBT0MsUUFBTyxPQUUxQyxHQUFDLENBQUFOLElBQUEsb0JBQUFDLE1BRUQsV0FDRVcsT0FBTzBDLGlCQUFpQixhQUFjckUsS0FBS1ksa0JBQzdDLEdBQUMsQ0FBQUcsSUFBQSx1QkFBQUMsTUFFRCxXQUNFVyxPQUFPMEMsaUJBQWlCLGFBQWNyRSxLQUFLWSxrQkFDN0Msb0ZBQUNsQixDQUFBLENBeExzQixrQkNmekI0RSxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2NsYXNzZXMvUGFnZS5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHU0FQIGZyb20gXCJnc2FwXCI7XG5pbXBvcnQgTm9ybWFsaXplV2hlZWwgZnJvbSBcIm5vcm1hbGl6ZS13aGVlbFwiO1xuaW1wb3J0IFByZWZpeCBmcm9tIFwicHJlZml4XCI7XG5cbmltcG9ydCBlYWNoIGZyb20gXCJsb2Rhc2gvZWFjaFwiO1xuaW1wb3J0IG1hcCBmcm9tIFwibG9kYXNoL21hcFwiO1xuXG5pbXBvcnQgSGlnaGxpZ2h0IGZyb20gXCJhbmltYXRpb25zL0hpZ2hsaWdodFwiO1xuaW1wb3J0IFRpdGxlIGZyb20gXCJhbmltYXRpb25zL1RpdGxlXCI7XG5pbXBvcnQgUGFyYWdyYXBoIGZyb20gXCJhbmltYXRpb25zL1BhcmFncmFwaFwiO1xuaW1wb3J0IExhYmVsIGZyb20gXCJhbmltYXRpb25zL0xhYmVsXCI7XG4vKipcbiAqIFRoaXMgaXMgYSBQYWdlIHBhcmVudCBjbGFzcyB0aGF0IHByb3ZpZGVzIHRoZSBwYWdlJ3MgcGFyZW50IGlkLCBzZWxlY3RvciBhbmQgaXQncyBjaGlsZHJlbiBzZWxlY3RvcnMgZm9yIGZ1dHVyZSB1c2UuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZSB7XG4gIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgZWxlbWVudHMsIGlkIH0pIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5zZWxlY3RvciA9IGVsZW1lbnQ7XG4gICAgdGhpcy5zZWxlY3RvckNoaWxkcmVuID0ge1xuICAgICAgLi4uZWxlbWVudHMsXG4gICAgICBhbmltYXRpb25zSGlnaGxpZ2h0czogJ1tkYXRhLWFuaW1hdGlvbj1cImhpZ2hsaWdodFwiXScsXG4gICAgICBhbmltYXRpb25zVGl0bGVzOiAnW2RhdGEtYW5pbWF0aW9uPVwidGl0bGVcIl0nLFxuICAgICAgYW5pbWF0aW9uc1BhcmFncmFwaHM6ICdbZGF0YS1hbmltYXRpb249XCJwYXJhZ3JhcGhcIl0nLFxuICAgICAgYW5pbWF0aW9uc0xhYmVsczogJ1tkYXRhLWFuaW1hdGlvbj1cImxhYmVsXCJdJyxcbiAgICB9O1xuICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KFwidHJhbnNmb3JtXCIpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtUHJlZml4KTtcblxuICAgIHRoaXMub25Nb3VzZVdoZWVsRXZlbnQgPSB0aGlzLm9uTW91c2VXaGVlbC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgYmVoYXZlIGxpa2UgY29tcG9uZW50RGlkTW91bnQgaW4gUmVhY3RcbiAgICogSXQgc2VsZWN0cyBhbGwgdGhlIHNlbGVjdG9ycyBmb3IgZnV0dXJlIHVzZS5cbiAgICogICovXG4gIGNyZWF0ZSgpIHtcbiAgICAvLyBzZWxlY3QgdGhlIHBhZ2UncyB0b3AgcGFyZW50IGVsZW1lbnQsIGxpa2UgXCIuaG9tZVwiIG9yIFwiLm5hdmlnYXRpb25cIlxuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3Rvcik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNoaWxkcmVuIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50cyA9IHt9O1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBtb3VzZSBzY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLnNjcm9sbCA9IHtcbiAgICAgIGN1cnJlbnQ6IDAsIC8vIGN1cnJlbnQgcG9zaXRpb24gc29mIG1vdXNlIHNjcm9sbFxuICAgICAgdGFyZ2V0OiAwLCAvLyB0YXJnZXQgcG9zdGlvblxuICAgICAgbGFzdDogMCwgLy8gbGFzdCBwb3N0aW9uIG9mIG1vdXNlIHNjcm9sbFxuICAgICAgbGltaXQ6IDAsIC8vIHBpeGVscyB0aGF0IG1vdXNld2hlZWwgY2FuIHNjcm9sbCB0aGUgbW9zdFxuICAgIH07XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIHRoZSBjaGlsZHJlbiBlbGVtZW50cyBhbmQgc2VsZWN0IGFsbCBvZiB0aGVtXG4gICAgZWFjaCh0aGlzLnNlbGVjdG9yQ2hpbGRyZW4sIChlbnRyeSwga2V5KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGVudHJ5IGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50IHx8XG4gICAgICAgIGVudHJ5IGluc3RhbmNlb2Ygd2luZG93Lk5vZGVMaXN0IHx8XG4gICAgICAgIEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gZW50cnk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVudHJ5KTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudHNba2V5XS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJlbGVtZW50czogXCIsIHRoaXMuZWxlbWVudHNba2V5XSwgZW50cnkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVBbmltYXRpb25zKCk7XG4gIH1cblxuICBjcmVhdGVBbmltYXRpb25zKCkge1xuICAgIHRoaXMuYW5pbWF0aW9ucyA9IFtdO1xuXG4gICAgLy9IaWdobGlnaHRzXG4gICAgdGhpcy5hbmltYXRpb25zSGlnaGxpZ2h0cyA9IG1hcChcbiAgICAgIHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uc0hpZ2hsaWdodHMsXG4gICAgICAoZWxlbWVudCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEhpZ2hsaWdodCh7IGVsZW1lbnQgfSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8vVGl0bGVzXG4gICAgdGhpcy5hbmltYXRpb25zVGl0bGVzID0gbWFwKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uc1RpdGxlcywgKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgVGl0bGUoeyBlbGVtZW50IH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2godGhpcy5hbmltYXRpb25zVGl0bGVzKTtcblxuICAgIC8vUGFyYWdyYXBoc1xuICAgIHRoaXMuYW5pbWF0aW9uc1BhcmFncmFwaHMgPSBtYXAoXG4gICAgICB0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNQYXJhZ3JhcGhzLFxuICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoeyBlbGVtZW50IH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2godGhpcy5hbmltYXRpb25zUGFyYWdyYXBocyk7XG5cbiAgICAvL0xhYmVsc1xuICAgIHRoaXMuYW5pbWF0aW9uc0xhYmVscyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNMYWJlbHMsIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExhYmVsKHsgZWxlbWVudCB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuYW5pbWF0aW9ucy5wdXNoKC4uLnRoaXMuYW5pbWF0aW9uc0xhYmVscyk7XG4gIH1cblxuICAvLyBzaG93IHBhZ2UgYW5pbWF0aW9uXG4gIHNob3coKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkluID0gR1NBUC50aW1lbGluZSgpO1xuICAgICAgdGhpcy5hbmltYXRpb25Jbi5mcm9tVG8oXG4gICAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgICAgeyBhdXRvQWxwaGE6IDAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGF1dG9BbHBoYTogMSxcbiAgICAgICAgICBvbkNvbXBsZXRlOiByZXNvbHZlLFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdGhpcy5hbmltYXRpb25Jbi5jYWxsKCgpID0+IHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGhpZGUgcGFnZSBhbmltYXRpb25cbiAgaGlkZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uT3V0ID0gR1NBUC50aW1lbGluZSgpO1xuICAgICAgdGhpcy5hbmltYXRpb25PdXQudG8odGhpcy5lbGVtZW50LCB7XG4gICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgb25Db21wbGV0ZTogcmVzb2x2ZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgb25Nb3VzZVdoZWVsKGV2ZW50KSB7XG4gICAgY29uc3QgeyBwaXhlbFkgfSA9IE5vcm1hbGl6ZVdoZWVsKGV2ZW50KTtcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZO1xuICB9XG5cbiAgb25SZXNpemUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMud3JhcHBlcikge1xuICAgICAgdGhpcy5zY3JvbGwubGltaXQgPVxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIGVhY2godGhpcy5hbmltYXRpb25zLCAoYW5pbWF0aW9uKSA9PiB7XG4gICAgLy8gICBhbmltYXRpb24ub25SZXNpemUoKTtcbiAgICAvLyB9KTtcblxuICAgIGVhY2godGhpcy5hbmltYXRpb25zTGFiZWxzLCAoYW5pbWF0aW9uKSA9PiB7XG4gICAgICBhbmltYXRpb24ub25SZXNpemUoKTtcbiAgICB9KTtcblxuICAgIGVhY2godGhpcy5hbmltYXRpb25zVGl0bGVzLCAoYW5pbWF0aW9uKSA9PiB7XG4gICAgICBhbmltYXRpb24ub25SZXNpemUoKTtcbiAgICB9KTtcblxuICAgIGVhY2godGhpcy5hbmltYXRpb25zUGFyYWdyYXBocywgKGFuaW1hdGlvbikgPT4ge1xuICAgICAgYW5pbWF0aW9uLm9uUmVzaXplKCk7XG4gICAgfSk7XG5cbiAgICBlYWNoKHRoaXMuYW5pbWF0aW9uc0hpZ2hsaWdodHMsIChhbmltYXRpb24pID0+IHtcbiAgICAgIGFuaW1hdGlvbi5vblJlc2l6ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoXG4gICAgICAwLFxuICAgICAgdGhpcy5zY3JvbGwubGltaXQsXG4gICAgICB0aGlzLnNjcm9sbC50YXJnZXRcbiAgICApO1xuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKFxuICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCxcbiAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCxcbiAgICAgIDAuMVxuICAgICk7XG4gICAgaWYgKHRoaXMuc2Nyb2xsLmN1cnJlbnQgPCAwLjAxKSB7XG4gICAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50cy53cmFwcGVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuc3R5bGVbXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4XG4gICAgICBdID0gYHRyYW5zbGF0ZVkoLSR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgO1xuICAgIH1cbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCB0aGlzLm9uTW91c2VXaGVlbEV2ZW50KTtcbiAgfVxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCB0aGlzLm9uTW91c2VXaGVlbEV2ZW50KTtcbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiOGZmYTA5OWI3Mzk1NmQyZTNjMzlcIikiXSwibmFtZXMiOlsiUGFnZSIsIl9yZWYiLCJlbGVtZW50IiwiZWxlbWVudHMiLCJpZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzZWxlY3RvciIsInNlbGVjdG9yQ2hpbGRyZW4iLCJfb2JqZWN0U3ByZWFkIiwiYW5pbWF0aW9uc0hpZ2hsaWdodHMiLCJhbmltYXRpb25zVGl0bGVzIiwiYW5pbWF0aW9uc1BhcmFncmFwaHMiLCJhbmltYXRpb25zTGFiZWxzIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiY29uc29sZSIsImxvZyIsIm9uTW91c2VXaGVlbEV2ZW50Iiwib25Nb3VzZVdoZWVsIiwiYmluZCIsImtleSIsInZhbHVlIiwiX3RoaXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGwiLCJjdXJyZW50IiwidGFyZ2V0IiwibGFzdCIsImxpbWl0IiwiZWFjaCIsImVudHJ5Iiwid2luZG93IiwiSFRNTEVsZW1lbnQiLCJOb2RlTGlzdCIsIkFycmF5IiwiaXNBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJjcmVhdGVBbmltYXRpb25zIiwiX3RoaXMkYW5pbWF0aW9ucyIsImFuaW1hdGlvbnMiLCJtYXAiLCJIaWdobGlnaHQiLCJUaXRsZSIsInB1c2giLCJQYXJhZ3JhcGgiLCJMYWJlbCIsImFwcGx5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiX3RoaXMyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJhbmltYXRpb25JbiIsIkdTQVAiLCJmcm9tVG8iLCJhdXRvQWxwaGEiLCJvbkNvbXBsZXRlIiwiY2FsbCIsImFkZEV2ZW50TGlzdGVuZXJzIiwiX3RoaXMzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJhbmltYXRpb25PdXQiLCJ0byIsImV2ZW50IiwicGl4ZWxZIiwiTm9ybWFsaXplV2hlZWwiLCJ3cmFwcGVyIiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJhbmltYXRpb24iLCJvblJlc2l6ZSIsInN0eWxlIiwiY29uY2F0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==